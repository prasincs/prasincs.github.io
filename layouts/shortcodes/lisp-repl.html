<div id="lisp-repl" style="background: var(--code-bg, #1a1a2e); border-radius: 8px; padding: 1.5rem; margin: 1.5rem 0; font-family: monospace;">
  <div style="margin-bottom: 1rem;">
    <label for="lisp-input" style="display: block; margin-bottom: 0.5rem; color: var(--primary, #6c9); font-weight: 600;">Lisp Expression:</label>
    <div style="display: flex; gap: 0.5rem;">
      <input type="text" id="lisp-input" value="{{ .Get "default" | default "(+ 1 2 (* 3 4))" }}" style="flex: 1; padding: 0.75rem; background: var(--tertiary, #2a2a3e); color: var(--content, #e0e0e0); border: 1px solid var(--border, #444); border-radius: 4px; font-family: monospace; font-size: 1rem;">
      <button onclick="evalLisp()" style="padding: 0.75rem 1.5rem; background: var(--primary, #6c9); color: #000; border: none; border-radius: 4px; cursor: pointer; font-weight: 600;">Eval</button>
    </div>
  </div>
  <div style="margin-bottom: 0.5rem; color: var(--secondary, #888); font-size: 0.875rem;">Result:</div>
  <pre id="lisp-output" style="background: var(--tertiary, #2a2a3e); padding: 1rem; border-radius: 4px; margin: 0; color: var(--content, #e0e0e0); min-height: 1.5em;">Loading WASM...</pre>
  <div style="margin-top: 1rem; font-size: 0.75rem; color: var(--secondary, #666);">
    Try: <code style="cursor: pointer; color: var(--primary, #6c9);" onclick="document.getElementById('lisp-input').value=this.textContent; evalLisp()">(* 6 7)</code> ·
    <code style="cursor: pointer; color: var(--primary, #6c9);" onclick="document.getElementById('lisp-input').value=this.textContent; evalLisp()">(car '(10 20 30))</code> ·
    <code style="cursor: pointer; color: var(--primary, #6c9);" onclick="document.getElementById('lisp-input').value=this.textContent; evalLisp()">(cdr '(1 2 3))</code>
  </div>
</div>
<script>
(function() {
  const output = document.getElementById('lisp-output');
  window.addEventListener('wasm-ready', () => {
    output.textContent = 'Ready! Enter an expression and click Eval.';
  });
  window.addEventListener('wasm-error', (e) => {
    output.textContent = 'Failed to load WASM: ' + e.detail.message;
  });
  // Check if already loaded
  if (window.WasmLoader && window.WasmLoader.ready) {
    output.textContent = 'Ready! Enter an expression and click Eval.';
  }
})();
</script>
